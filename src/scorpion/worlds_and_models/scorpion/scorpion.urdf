<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from scorpion.urdf.xacro            | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="scorpion">
  <material name="red">
    <color rgba="1 0.0 0.0 1"/>
  </material>
  <material name="black">
    <color rgba="0.043 0.004 0 1"/>
  </material>
  <material name="silver">
    <color rgba="0.73 0.73 0.82 1"/>
  </material>
  <!-- see https://secure.wikimedia.org/wikipedia/en/wiki/List_of_moment_of_inertia_tensors -->
  <link name="base_link"/>
  <joint name="chasis_link_joint" type="fixed">
    <parent link="base_link"/>
    <child link="chassis_link"/>
    <origin rpy="0 0 3.141" xyz="0 0 0"/>
  </joint>
  <!--Generated by CROSS, a ROS Workbench for FreeCAD (https://github.com/galou/freecad.cross)-->
  <link name="chassis_link">
    <visual>
      <!--chassis/Body.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_chassis_body.dae"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <origin xyz="0.09 0 0.03"/>
      <geometry>
        <box size="0.18 0.09 0.03"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="4"/>
      <origin xyz="0.09 0 0"/>
      <inertia ixx="0.01019999592" ixy="0.0" ixz="0.0" iyy="0.01829999268" iyz="0.0" izz="0.013499994599999997"/>
    </inertial>
  </link>
  <link name="tail_link1">
    <visual>
      <!--tail1/Body001.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_tail1_body.dae"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <origin xyz="-0.042 0 0"/>
      <geometry>
        <box size="0.085 0.04 0.015"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8"/>
      <origin xyz="-0.04 0 0"/>
      <inertia ixx="0.000121666618" ixy="0.0" ixz="0.0" iyy="0.0004966664680000001" iyz="0.0" izz="0.0005883330980000001"/>
    </inertial>
  </link>
  <link name="tail_link2">
    <visual>
      <!--tail2/Body002.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_tail2_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin xyz="-0.025 0 0"/>
      <geometry>
        <box size="0.05 0.03 0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="-0.025 0 0"/>
      <inertia ixx="4.8749980499999996e-05" ixy="0.0" ixz="0.0" iyy="7.54166365e-05" iyz="0.0" izz="5.6666644000000004e-05"/>
    </inertial>
  </link>
  <link name="tail_link3">
    <visual>
      <!--tail3/Body003.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_tail3_body.dae"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <inertial>
      <mass value="0.4"/>
      <origin xyz="-0.05 0 0"/>
      <inertia ixx="0.00011803328611999999" ixy="0.0" ixz="0.0" iyy="0.0004305331611200001" iyz="0.0" izz="0.00035416652500000007"/>
    </inertial>
    <collision>
      <origin rpy="1.57 0 0" xyz="-0.05 0 0"/>
      <geometry>
        <box size="0.1 0.025 0.054"/>
      </geometry>
    </collision>
  </link>
  <link name="left_wheel_3">
    <visual>
      <!--wheel/Body004.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_wheel_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0005"/>
      <origin rpy="1.57 0 0"/>
      <inertia ixx="1.354166125e-08" ixy="0.0" ixz="0.0" iyy="1.354166125e-08" iyz="0.0" izz="2.5000000000000002e-08"/>
    </inertial>
  </link>
  <gazebo reference="left_wheel_3">
    <collision>
      <surface>
        <friction>
          <ode>
            <mu>0.5</mu>
            <mu1>0.5</mu1>
            <mu2>1.0</mu2>
            <fdir1>0 0 1</fdir1>
          </ode>
        </friction>
      </surface>
    </collision>
  </gazebo>
  <link name="left_wheel_2">
    <visual>
      <!--wheel/Body004.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_wheel_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0005"/>
      <origin rpy="1.57 0 0"/>
      <inertia ixx="1.354166125e-08" ixy="0.0" ixz="0.0" iyy="1.354166125e-08" iyz="0.0" izz="2.5000000000000002e-08"/>
    </inertial>
  </link>
  <gazebo reference="left_wheel_2">
    <collision>
      <surface>
        <friction>
          <ode>
            <mu>0.5</mu>
            <mu1>0.5</mu1>
            <mu2>1.0</mu2>
            <fdir1>0 0 1</fdir1>
          </ode>
        </friction>
      </surface>
    </collision>
  </gazebo>
  <link name="left_wheel_1">
    <visual>
      <!--wheel/Body004.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_wheel_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0005"/>
      <origin rpy="1.57 0 0"/>
      <inertia ixx="1.354166125e-08" ixy="0.0" ixz="0.0" iyy="1.354166125e-08" iyz="0.0" izz="2.5000000000000002e-08"/>
    </inertial>
  </link>
  <gazebo reference="left_wheel_1">
    <collision>
      <surface>
        <friction>
          <ode>
            <mu>0.5</mu>
            <mu1>0.5</mu1>
            <mu2>1.0</mu2>
            <fdir1>0 0 1</fdir1>
          </ode>
        </friction>
      </surface>
    </collision>
  </gazebo>
  <link name="right_wheel_3">
    <visual>
      <!--wheel/Body004.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_wheel_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0005"/>
      <origin rpy="1.57 0 0"/>
      <inertia ixx="1.354166125e-08" ixy="0.0" ixz="0.0" iyy="1.354166125e-08" iyz="0.0" izz="2.5000000000000002e-08"/>
    </inertial>
  </link>
  <gazebo reference="right_wheel_3">
    <collision>
      <surface>
        <friction>
          <ode>
            <mu>0.5</mu>
            <mu1>0.5</mu1>
            <mu2>1.0</mu2>
            <fdir1>0 0 1</fdir1>
          </ode>
        </friction>
      </surface>
    </collision>
  </gazebo>
  <link name="right_wheel_2">
    <visual>
      <!--wheel/Body004.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_wheel_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0005"/>
      <origin rpy="1.57 0 0"/>
      <inertia ixx="1.354166125e-08" ixy="0.0" ixz="0.0" iyy="1.354166125e-08" iyz="0.0" izz="2.5000000000000002e-08"/>
    </inertial>
  </link>
  <gazebo reference="right_wheel_2">
    <collision>
      <surface>
        <friction>
          <ode>
            <mu>0.5</mu>
            <mu1>0.5</mu1>
            <mu2>1.0</mu2>
            <fdir1>0 0 1</fdir1>
          </ode>
        </friction>
      </surface>
    </collision>
  </gazebo>
  <link name="right_wheel_1">
    <visual>
      <!--wheel/Body004.-->
      <origin rpy="0.0 -0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="file:///workspace/install/scorpion/share/scorpion/worlds_and_models/scorpion/meshes/Unnamed_wheel_body.dae"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0005"/>
      <origin rpy="1.57 0 0"/>
      <inertia ixx="1.354166125e-08" ixy="0.0" ixz="0.0" iyy="1.354166125e-08" iyz="0.0" izz="2.5000000000000002e-08"/>
    </inertial>
  </link>
  <gazebo reference="right_wheel_1">
    <collision>
      <surface>
        <friction>
          <ode>
            <mu>0.5</mu>
            <mu1>0.5</mu1>
            <mu2>1.0</mu2>
            <fdir1>0 0 1</fdir1>
          </ode>
        </friction>
      </surface>
    </collision>
  </gazebo>
  <joint name="joint_1" type="revolute">
    <parent link="chassis_link"/>
    <child link="tail_link1"/>
    <origin rpy="0.0 0.7853981633974484 0.0" xyz="0.19 0.0 0.05"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-3.141592653589793" upper="3.14" velocity="10"/>
  </joint>
  <joint name="joint_2" type="revolute">
    <parent link="tail_link1"/>
    <child link="tail_link2"/>
    <origin rpy="0.0 -0.0 0.0" xyz="-0.065 0.0 -0.008"/>
    <axis xyz="0 0 1"/>
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="1"/>
  </joint>
  <joint name="joint_3" type="revolute">
    <parent link="tail_link2"/>
    <child link="tail_link3"/>
    <origin rpy="0.0 -0.0 0.0" xyz="-0.046 0.0 0.0"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="1"/>
  </joint>
  <joint name="left_wheel_joint_1" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel_1"/>
    <origin rpy="0 0 0" xyz="0.02 -0.033 0.015"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-10000.0" upper="10000.0" velocity="1"/>
  </joint>
  <joint name="left_wheel_joint_2" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel_2"/>
    <origin rpy="0 0 0" xyz="0.09 -0.033 0.015"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-10000.0" upper="10000.0" velocity="1"/>
  </joint>
  <joint name="left_wheel_joint_3" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel_3"/>
    <origin rpy="0 0 0" xyz="0.16 -0.033 0.015"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-10000.0" upper="10000.0" velocity="1"/>
  </joint>
  <joint name="right_wheel_joint_1" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel_1"/>
    <origin rpy="0 0 0" xyz="0.02 0.033 0.015"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-10000.0" upper="10000.0" velocity="1"/>
  </joint>
  <joint name="right_wheel_joint_2" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel_2"/>
    <origin rpy="0 0 0" xyz="0.09 0.033 0.015"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-10000.0" upper="10000.0" velocity="1"/>
  </joint>
  <joint name="right_wheel_joint_3" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel_3"/>
    <origin rpy="0 0 0" xyz="0.16 0.033 0.015"/>
    <axis xyz="0 -1 0"/>
    <limit effort="10.0" lower="-10000.0" upper="10000.0" velocity="1"/>
  </joint>
  <ros2_control name="GazeboSystem" type="system">
    <hardware>
      <plugin>ign_ros2_control/IgnitionSystem</plugin>
    </hardware>
    <joint name="left_wheel_joint_3">
      <command_interface name="velocity">
        <param name="min">-0.2</param>
        <param name="max">0.2</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="left_wheel_joint_2">
      <command_interface name="velocity">
        <param name="min">-0.2</param>
        <param name="max">0.2</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="left_wheel_joint_1">
      <command_interface name="velocity">
        <param name="min">-0.2</param>
        <param name="max">0.2</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint_3">
      <command_interface name="velocity">
        <param name="min">-0.2</param>
        <param name="max">0.2</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint_2">
      <command_interface name="velocity">
        <param name="min">-0.2</param>
        <param name="max">0.2</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint_1">
      <command_interface name="velocity">
        <param name="min">-0.2</param>
        <param name="max">0.2</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_1">
      <command_interface name="position">
        <param name="min">0</param>
        <param name="max">3.14</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_2">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_3">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>
  <gazebo>
    <plugin filename="ign_ros2_control-system" name="ign_ros2_control::IgnitionROS2ControlPlugin">
      <ros>
        <remapping>/diff_drive_base_controller/odom:=odom</remapping>
        <remapping>/diff_drive_base_controller/tf_odometry:=tf</remapping>
        <remapping>/diff_drive_base_controller/cmd_vel_unstamped:=cmd_vel</remapping>
      </ros>
      <parameters>/workspace/install/scorpion/share/scorpion/config/diffdrive_control.yaml</parameters>
    </plugin>
    <!-- Remapping topics so that mapping system works! -->
    <plugin filename="ignition-gazebo-sensors-system" name="ignition::gazebo::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
  </gazebo>
  <link name="chassis_camera_link"/>
  <joint name="chassis_camera_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="chassis_camera_link"/>
    <origin rpy="0 0 3.141" xyz="0 0 0.1"/>
  </joint>
  <gazebo reference="chassis_camera_link">
    <sensor name="realsense_d435" type="rgbd_camera">
      <topic>realsense</topic>
      <ignition_frame_id>chassis_camera_optical_link</ignition_frame_id>
      <update_rate>5</update_rate>
      <camera name="depth_camera">
        <horizontal_fov>1.4</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.01</near>
          <far>5</far>
        </clip>
        <depth_camera>
          <clip>
            <near>0.1</near>
            <far>5</far>
          </clip>
        </depth_camera>
        <noise>
          <type>gaussian</type>
          <mean>0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
    </sensor>
  </gazebo>
  <link name="tail_camera_link"/>
  <joint name="tail_camera_joint" type="fixed">
    <parent link="tail_link3"/>
    <child link="tail_camera_link"/>
    <origin rpy="0 0 3.141" xyz="-0.25 0 0"/>
  </joint>
  <gazebo reference="tail_camera_link">
    <sensor name="tailcamera" type="camera">
      <topic>tail_camera</topic>
      <ignition_frame_id>tail_camera_link</ignition_frame_id>
      <update_rate>5</update_rate>
      <camera>
        <horizontal_fov>1.047</horizontal_fov>
        <image>
          <width>320</width>
          <height>240</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>20</far>
        </clip>
      </camera>
      <always_on>1</always_on>
      <update_rate>5</update_rate>
      <visualize>true</visualize>
    </sensor>
  </gazebo>
</robot>
